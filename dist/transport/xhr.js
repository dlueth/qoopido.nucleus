!function(e,t){"use strict";provide(["/demand/abstract/uuid","/demand/pledge","/demand/validator/isObject","/demand/function/iterate","../url","../function/merge"],function(n,r,a,o,u,s){var i="XDomainRequest"in e&&e.XDomainRequest||t,c=/%20/g,l=/%5B/g,d=/%5D/g,p={};function h(e){var n,u,s=p[this.uuid],h=s.settings,f=s.url,m=s.data,T=f.local?new t:new i,g=r.defer(),R=function(){this.readyState<4&&this.abort()}.bind(T),w=h.timeout;return m&&"GET"===e&&(o(m,f.parameter.set),m=null),h.cache||f.parameter.set("nucleus",+new Date),m&&(u="",o(m,function(e,t){u+=(u?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(t)}),m=u.replace(c,"+").replace(l,"[").replace(d,"]")),a(h.xhrOptions)&&o(h.xhrOptions,function(e,t){T[e]=t}),T.ontimeout=T.onerror=T.onabort=function(){g.reject(T)},T.onprogress=T.onreadystatechange=function(){clearTimeout(n),n=setTimeout(R,w)},T.onload=function(){n=clearTimeout(n),"status"in T&&200!==T.status?g.reject(T):g.resolve(T.responseText,T)},T.open(e,f.href,!0),T.setRequestHeader&&(T.setRequestHeader("Accept",h.accept),m&&"GET"!==e&&T.setRequestHeader("Content-Type",h.contentType),a(h.header)&&o(h.header,function(e,t){T.setRequestHeader(e,t)})),T.send(m),n=setTimeout(R,w),g.pledge}function f(e,t,r){var a=n.call(this);return p[a.uuid]={settings:s({},f.settings,r),url:new u(e),data:t},a}return f.prototype={get:function(){return h.call(this,"GET")},post:function(){return h.call(this,"POST")},put:function(){return h.call(this,"PUT")},patch:function(){return h.call(this,"PATCH")},delete:function(){return h.call(this,"DELETE")},head:function(){return h.call(this,"HEAD")}},f.settings={accept:"*/*",timeout:8e3,async:!0,cache:!1,username:null,password:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",header:{},xhrOptions:{}},f.extends(n)})}(this,XMLHttpRequest);
//# sourceMappingURL=xhr.js.map
