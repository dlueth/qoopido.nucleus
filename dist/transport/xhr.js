!function(n,R){"use strict";provide(["/demand/weakmap","/demand/pledge","/demand/validator/isObject","/demand/function/iterate","../url","../function/merge"],function(e,d,p,h,r,o){var f="XDomainRequest"in n&&n.XDomainRequest||R,m=/%20/g,T=/%5B/g,g=/%5D/g,w=new e;function t(e){var t,n,r=w.get(this),o=r.settings,a=r.url,s=r.data,i=a.local?new R:new f,c=d.defer(),u=function(){this.readyState<4&&this.abort()}.bind(i),l=o.timeout;return s&&"GET"===e&&(h(s,a.parameter.set),s=null),o.cache||a.parameter.set("nucleus",+new Date),s&&(n="",h(s,function(e,t){n+=(n?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(t)}),s=n.replace(m,"+").replace(T,"[").replace(g,"]")),p(o.xhrOptions)&&h(o.xhrOptions,function(e,t){i[e]=t}),i.ontimeout=i.onerror=i.onabort=function(){c.reject(i)},i.onprogress=i.onreadystatechange=function(){clearTimeout(t),t=setTimeout(u,l)},i.onload=function(){t=clearTimeout(t),"status"in i&&200!==i.status?c.reject(i):c.resolve(i.responseText,i)},i.open(e,a.href,!0),i.setRequestHeader&&(i.setRequestHeader("Accept",o.accept),s&&"GET"!==e&&i.setRequestHeader("Content-Type",o.contentType),p(o.header)&&h(o.header,function(e,t){i.setRequestHeader(e,t)})),i.send(s),t=setTimeout(u,l),c.pledge}function a(e,t,n){return w.set(this,{settings:o({},a.settings,n),url:new r(e),data:t}),this}return a.prototype={get:function(){return t.call(this,"GET")},post:function(){return t.call(this,"POST")},put:function(){return t.call(this,"PUT")},patch:function(){return t.call(this,"PATCH")},delete:function(){return t.call(this,"DELETE")},head:function(){return t.call(this,"HEAD")}},a.settings={accept:"*/*",timeout:8e3,async:!0,cache:!1,username:null,password:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",header:{},xhrOptions:{}},a})}(this,XMLHttpRequest);
//# sourceMappingURL=xhr.js.map
