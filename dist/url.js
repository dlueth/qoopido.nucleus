!function(e,t){"use strict";provide(["/demand/abstract/uuid","/demand/descriptor","/demand/function/iterate"],function(e,r,i){var u,n=Object.defineProperties,s={},a=/^\//,o=/[?&]?([^=]+)=([^&]*)/g,h=/%20/g,d=/%5B/g,c=/%5D/g,p=new RegExp("^"+((u=t.createElement("a")).href="/",u.href.slice(0,-1)),"i"),f={"http:":/:80$/,"https:":/:443$/,"ftp:":/:21$/};function l(e,t){var r;if(r=s[e])return r.link[t]}function m(e,t,r){var i;(i=s[e])&&(i.link[t]=r)}function g(e){n(this,{uuid:new r(e)}),g.update(this)}function v(i){var u=e.call(this),a=t.createElement("a");return a.href=i,s[u.uuid]={link:a,parameter:{}},n(u,{toString:new r(function(){return a.toString()}),valueOf:new r(function(){return a.valueOf()}),parameter:new r(new g(u.uuid))}),u}return g.prototype={get:function(e){return s[this.uuid].parameter[e]},set:function(e,t){s[this.uuid].parameter[e]=t,g.serialize(this)},remove:function(e){delete s[this.uuid].parameter[e],g.serialize(this)}},g.update=function(e){var t,r=s[e.uuid],u=r.parameter,n=r.link.search.split("+").join(" ");for(i(u,function(e){delete u[e]});t=o.exec(n);)u[decodeURIComponent(t[1])]=decodeURIComponent(t[2])},g.serialize=function(e){var t=s[e.uuid],r=t.parameter,u="";i(r,function(e,t){u+=(u?"&":"?")+encodeURIComponent(e)+"="+encodeURIComponent(t)}),t.link.search=u.replace(h,"+").replace(d,"[").replace(c,"]")},v.prototype={get local(){var e;if(e=l(this.uuid,"href"))return p.test(e)},get href(){return l(this.uuid,"href")},set href(e){m(this.uuid,"href",e)},get origin(){var e=this;return l(e.uuid,"origin")||e.protocol+"//"+e.host},get protocol(){return l(this.uuid,"protocol")},set protocol(e){m(this.uuid,"protocol",e)},get username(){return l(this.uuid,"username")},set username(e){m(this.uuid,"username",e)},get password(){return l(this.uuid,"password")},set password(e){m(this.uuid,"password",e)},get host(){var e,t;if(e=l(this.uuid,"host"))return t=l(this.uuid,"protocol"),f[t]?e.replace(f[t],""):e},set host(e){m(this.uuid,"host",e)},get hostname(){return l(this.uuid,"hostname")},set hostname(e){m(this.uuid,"hostname",e)},get port(){return l(this.uuid,"port")},set port(e){m(this.uuid,"port",e)},get pathname(){var e;if(e=l(this.uuid,"pathname"))return a.test(e)?e:"/"+e},set pathname(e){m(this.uuid,"pathname",e)},get search(){return l(this.uuid,"search")},set search(e){m(this.uuid,"search",e),g.update.call(this)},get hash(){return l(this.uuid,"hash")},set hash(e){m(this.uuid,"hash",e)}},v.extends(e)})}(0,document);
//# sourceMappingURL=url.js.map
