!function(t,e){"use strict";provide(["/demand/abstract/uuid","/demand/descriptor","/demand/function/iterate"],function(t,r,i){var u,n=Object.defineProperties,s={},o=/^\//,a=/[?&]?([^=]+)=([^&]*)/g,h=/%20/g,d=/%5B/g,c=/%5D/g,p=new RegExp("^"+((u=e.createElement("a")).href="/",u.href.slice(0,-1)),"i"),f={"http:":/:80$/,"https:":/:443$/,"ftp:":/:21$/};function l(t,e){var r;if(r=s[t])return r.link[e]}function m(t,e,r){var i;(i=s[t])&&(i.link[e]=r)}function g(t){n(this,{uuid:new r(t)}),g.update(this)}function v(i){var u=t.call(this),o=e.createElement("a");return o.href=i,s[u.uuid]={link:o,parameter:{}},n(u,{toString:new r(function(){return o.toString()}),valueOf:new r(function(){return o.valueOf()}),parameter:new r(new g(u.uuid))}),u}return g.prototype={get:function(t){return s[this.uuid].parameter[t]},set:function(t,e){s[this.uuid].parameter[t]=e,g.serialize(this)},remove:function(t){delete s[this.uuid].parameter[t],g.serialize(this)}},g.update=function(t){var e,r=s[t.uuid],u=r.parameter,n=r.link.search.split("+").join(" ");for(i(u,function(t){delete u[t]});e=a.exec(n);)u[decodeURIComponent(e[1])]=decodeURIComponent(e[2])},g.serialize=function(t){var e=s[t.uuid],r=e.parameter,u="";i(r,function(t,e){u+=(u?"&":"?")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),e.link.search=u.replace(h,"+").replace(d,"[").replace(c,"]")},v.prototype={get local(){var t;if(t=l(this.uuid,"href"))return p.test(t)},get href(){return l(this.uuid,"href")},set href(t){m(this.uuid,"href",t)},get origin(){return l(this.uuid,"origin")||this.protocol+"//"+this.host},get protocol(){return l(this.uuid,"protocol")},set protocol(t){m(this.uuid,"protocol",t)},get username(){return l(this.uuid,"username")},set username(t){m(this.uuid,"username",t)},get password(){return l(this.uuid,"password")},set password(t){m(this.uuid,"password",t)},get host(){var t,e;if(t=l(this.uuid,"host"))return e=l(this.uuid,"protocol"),f[e]?t.replace(f[e],""):t},set host(t){m(this.uuid,"host",t)},get hostname(){return l(this.uuid,"hostname")},set hostname(t){m(this.uuid,"hostname",t)},get port(){return l(this.uuid,"port")},set port(t){m(this.uuid,"port",t)},get pathname(){var t;if(t=l(this.uuid,"pathname"))return o.test(t)?t:"/"+t},set pathname(t){m(this.uuid,"pathname",t)},get search(){return l(this.uuid,"search")},set search(t){m(this.uuid,"search",t),g.update.call(this)},get hash(){return l(this.uuid,"hash")},set hash(t){m(this.uuid,"hash",t)}},v.extends(t)})}(0,document);
//# sourceMappingURL=url.js.map
