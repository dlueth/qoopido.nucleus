{"version":3,"sources":["dom/collection.js"],"names":["document","provide","isTypeOf","isInstanceOf","Descriptor","DomElement","arrayPrototypeSlice","Array","prototype","slice","objectDefineProperty","Object","defineProperty","resolveElements","elements","selectors","selector","i","split","concat","call","querySelectorAll","exception","length","isArray","map","method","element","self","this","parameter","arguments","apply","mapFragment","target","buildFragment","fragment","createDocumentFragment","appendChild","node","DomCollection","add","get","index","temp","nodes","indexOf","push","remove","splice","each","callback","setAttribute","attribute","value","setAttributes","attributes","removeAttribute","removeAttributes","setStyle","property","setStyles","properties","removeStyle","removeStyles","addClass","name","removeClass","toggleClass","prependTo","appendTo","insertBefore","parentNode","insertAfter","sibling","nextSibling","replace","detach","blur","on","one","off","emit"],"mappings":"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","file":"collection.js","sourcesContent":["/**\n * @use /demand/validator/isTypeOf\n * @use /demand/validator/isInstanceOf\n * @use /demand/descriptor\n *\n * @require ../element\n */\n\n(function(document) {\n\t'use strict';\n\n\tfunction definition(isTypeOf, isInstanceOf, Descriptor, DomElement) {\n\t\tvar arrayPrototypeSlice  = Array.prototype.slice,\n\t\t\tobjectDefineProperty = Object.defineProperty;\n\n\t\tfunction resolveElements(elements) {\n\t\t\tvar selectors, selector, i = 0;\n\n\t\t\tif(isTypeOf(elements, 'string')) {\n\t\t\t\tselectors = elements.split(',');\n\t\t\t\telements  = [];\n\n\t\t\t\tfor(i = 0; selector = selectors[i]; i++) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\telements = elements.concat(arrayPrototypeSlice.call(document.querySelectorAll(selector)));\n\t\t\t\t\t} catch(exception) {} // eslint-disable-line no-empty\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(elements.length && !Array.isArray(elements)) {\n\t\t\t\telements = arrayPrototypeSlice.call(elements);\n\t\t\t}\n\n\t\t\tif(!Array.isArray(elements)) {\n\t\t\t\telements = [ elements ];\n\t\t\t}\n\n\t\t\treturn elements;\n\t\t}\n\n\t\tfunction map(method) {\n\t\t\tvar self      = this,\n\t\t\t\telements  = self.elements,\n\t\t\t\tparameter = arrayPrototypeSlice.call(arguments, 1),\n\t\t\t\ti = 0, element;\n\n\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\telement[method].apply(element, parameter);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction mapFragment(target, method) {\n\t\t\tvar self = this;\n\n\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\tif(target) {\n\t\t\t\ttarget[method].call(target, buildFragment(self.elements));\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction buildFragment(elements) {\n\t\t\tvar fragment = document.createDocumentFragment(),\n\t\t\t\ti = 0, element;\n\n\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\tfragment.appendChild(element.node);\n\t\t\t}\n\n\t\t\treturn fragment;\n\t\t}\n\n\t\tfunction DomCollection(elements) {\n\t\t\tvar self = this;\n\n\t\t\tobjectDefineProperty(self, 'elements', new Descriptor([]));\n\t\t\tobjectDefineProperty(self, 'nodes', new Descriptor([]));\n\n\t\t\tif(elements) {\n\t\t\t\tself.add(elements);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tDomCollection.prototype = {\n\t\t\t/* only for reference\n\t\t\telements: null,\n\t\t\tnodes:    null\n\t\t\t*/\n\t\t\tget length() {\n\t\t\t\treturn this.elements.length;\n\t\t\t},\n\t\t\tget: function(index) {\n\t\t\t\treturn this.elements[index];\n\t\t\t},\n\t\t\tadd: function(elements) {\n\t\t\t\tvar self = this,\n\t\t\t\t\ti = 0, temp;\n\n\t\t\t\telements = resolveElements(elements);\n\n\t\t\t\tfor(; temp = elements[i]; i++) {\n\t\t\t\t\tif(self.nodes.indexOf(temp.node || temp) === -1) {\n\t\t\t\t\t\ttemp = isInstanceOf(temp, DomElement) ? temp : new DomElement(temp);\n\n\t\t\t\t\t\tself.elements.push(temp);\n\t\t\t\t\t\tself.nodes.push(temp.node);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tremove: function(elements) {\n\t\t\t\tvar self = this,\n\t\t\t\t\ti = 0, temp, index;\n\n\t\t\t\telements = resolveElements(elements);\n\n\t\t\t\tfor(; temp = elements[i]; i++) {\n\t\t\t\t\tif((index = self.nodes.indexOf(temp.node || temp)) !== -1) {\n\t\t\t\t\t\tself.elements.splice(index, 1);\n\t\t\t\t\t\tself.nodes.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\teach: function(callback) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\tcallback.call(element, i);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tsetAttribute: function(attribute, value) {\n\t\t\t\treturn map.call(this, 'setAttribute', attribute, value);\n\t\t\t},\n\t\t\tsetAttributes: function(attributes) {\n\t\t\t\treturn map.call(this, 'setAttributes', attributes);\n\t\t\t},\n\t\t\tremoveAttribute: function(attribute) {\n\t\t\t\treturn map.call(this, 'removeAttribute', attribute);\n\t\t\t},\n\t\t\tremoveAttributes: function(attributes) {\n\t\t\t\treturn map.call(this, 'removeAttributes', attributes);\n\t\t\t},\n\t\t\tsetStyle: function(property, value) {\n\t\t\t\treturn map.call(this, 'setStyle', property, value);\n\t\t\t},\n\t\t\tsetStyles: function(properties) {\n\t\t\t\treturn map.call(this, 'setStyles', properties);\n\t\t\t},\n\t\t\tremoveStyle: function(property) {\n\t\t\t\treturn map.call(this, 'removeStyle', property);\n\t\t\t},\n\t\t\tremoveStyles: function(properties) {\n\t\t\t\treturn map.call(this, 'removeStyles', properties);\n\t\t\t},\n\t\t\taddClass: function(name) {\n\t\t\t\treturn map.call(this, 'addClass', name);\n\t\t\t},\n\t\t\tremoveClass: function(name) {\n\t\t\t\treturn map.call(this, 'removeClass', name);\n\t\t\t},\n\t\t\ttoggleClass: function(name) {\n\t\t\t\treturn map.call(this, 'toggleClass', name);\n\t\t\t},\n\t\t\tprependTo: function(target) {\n\t\t\t\treturn mapFragment.call(this, target, 'prepend');\n\t\t\t},\n\t\t\tappendTo: function(target) {\n\t\t\t\treturn mapFragment.call(this, target, 'append');\n\t\t\t},\n\t\t\tinsertBefore: function(target) {\n\t\t\t\tvar self = this;\n\n\t\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\t\tif(target && (target = target.node)) {\n\t\t\t\t\ttarget.parentNode.insertBefore(buildFragment(self.elements), target);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tinsertAfter: function(target) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tsibling, fragment;\n\n\t\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\t\tif(target && (target = target.node)) {\n\t\t\t\t\tfragment = buildFragment(self.elements);\n\n\t\t\t\t\t(sibling = target.nextSibling) ? target.parentNode.insertBefore(fragment, sibling) : target.parentNode.appendChild(fragment);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\treplace: function(target) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\tif(i === 0) {\n\t\t\t\t\t\telement.replace(target);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.insertAfter(elements[i - 1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tdetach: function() {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\telement.detach();\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tblur: function() {\n\t\t\t\treturn map.call(this, 'blur');\n\t\t\t},\n\t\t\ton: function() {\n\t\t\t\treturn map.apply(this, [ 'on' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\tone: function() {\n\t\t\t\treturn map.apply(this, [ 'one' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\toff: function() {\n\t\t\t\treturn map.apply(this, [ 'off' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\temit: function() {\n\t\t\t\treturn map.apply(this, [ 'emit' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t}\n\t\t};\n\n\t\treturn DomCollection;\n\t}\n\n\tprovide([ '/demand/validator/isTypeOf', '/demand/validator/isInstanceOf', '/demand/descriptor', './element' ], definition);\n}(document));\n"]}