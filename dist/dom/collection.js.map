{"version":3,"sources":["dom/collection.js"],"names":["document","provide","isTypeOf","isInstanceOf","Descriptor","DomElement","arrayPrototypeSlice","Array","prototype","slice","objectDefineProperty","Object","defineProperty","resolveElements","elements","selectors","selector","i","split","concat","call","querySelectorAll","exception","length","isArray","map","method","element","this","parameter","arguments","apply","mapFragment","target","buildFragment","fragment","createDocumentFragment","appendChild","node","DomCollection","add","get","index","temp","nodes","indexOf","push","remove","splice","each","callback","setAttribute","attribute","value","setAttributes","attributes","removeAttribute","removeAttributes","setStyle","property","setStyles","properties","removeStyle","removeStyles","addClass","name","removeClass","toggleClass","prependTo","appendTo","insertBefore","parentNode","insertAfter","sibling","nextSibling","replace","detach","blur","on","one","off","emit"],"mappings":"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","file":"collection.js","sourcesContent":["/**\n * @use /demand/validator/isTypeOf\n * @use /demand/validator/isInstanceOf\n * @use /demand/descriptor\n *\n * @require ../element\n */\n\n(function(document) {\n\t'use strict';\n\n\tfunction definition(isTypeOf, isInstanceOf, Descriptor, DomElement) {\n\t\tvar arrayPrototypeSlice  = Array.prototype.slice,\n\t\t\tobjectDefineProperty = Object.defineProperty;\n\n\t\tfunction resolveElements(elements) {\n\t\t\tvar selectors, selector, i = 0;\n\n\t\t\tif(isTypeOf(elements, 'string')) {\n\t\t\t\tselectors = elements.split(',');\n\t\t\t\telements  = [];\n\n\t\t\t\tfor(i = 0; selector = selectors[i]; i++) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\telements = elements.concat(arrayPrototypeSlice.call(document.querySelectorAll(selector)));\n\t\t\t\t\t} catch(exception) {} // eslint-disable-line no-empty\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(elements.length && !Array.isArray(elements)) {\n\t\t\t\telements = arrayPrototypeSlice.call(elements);\n\t\t\t}\n\n\t\t\tif(!Array.isArray(elements)) {\n\t\t\t\telements = [ elements ];\n\t\t\t}\n\n\t\t\treturn elements;\n\t\t}\n\n\t\tfunction map(method) {\n\t\t\tvar self      = this,\n\t\t\t\telements  = self.elements,\n\t\t\t\tparameter = arrayPrototypeSlice.call(arguments, 1),\n\t\t\t\ti = 0, element;\n\n\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\telement[method].apply(element, parameter);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction mapFragment(target, method) {\n\t\t\tvar self = this;\n\n\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\tif(target) {\n\t\t\t\ttarget[method].call(target, buildFragment(self.elements));\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction buildFragment(elements) {\n\t\t\tvar fragment = document.createDocumentFragment(),\n\t\t\t\ti = 0, element;\n\n\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\tfragment.appendChild(element.node);\n\t\t\t}\n\n\t\t\treturn fragment;\n\t\t}\n\n\t\tfunction DomCollection(elements) {\n\t\t\tvar self = this;\n\n\t\t\tobjectDefineProperty(self, 'elements', new Descriptor([]));\n\t\t\tobjectDefineProperty(self, 'nodes', new Descriptor([]));\n\n\t\t\tif(elements) {\n\t\t\t\tself.add(elements);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tDomCollection.prototype = {\n\t\t\t/* only for reference\n\t\t\telements: null,\n\t\t\tnodes:    null\n\t\t\t*/\n\t\t\tget length() {\n\t\t\t\treturn this.elements.length;\n\t\t\t},\n\t\t\tget: function(index) {\n\t\t\t\treturn this.elements[index];\n\t\t\t},\n\t\t\tadd: function(elements) {\n\t\t\t\tvar self = this,\n\t\t\t\t\ti = 0, temp;\n\n\t\t\t\telements = resolveElements(elements);\n\n\t\t\t\tfor(; temp = elements[i]; i++) {\n\t\t\t\t\tif(self.nodes.indexOf(temp.node || temp) === -1) {\n\t\t\t\t\t\ttemp = isInstanceOf(temp, DomElement) ? temp : new DomElement(temp);\n\n\t\t\t\t\t\tself.elements.push(temp);\n\t\t\t\t\t\tself.nodes.push(temp.node);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tremove: function(elements) {\n\t\t\t\tvar self = this,\n\t\t\t\t\ti = 0, temp, index;\n\n\t\t\t\telements = resolveElements(elements);\n\n\t\t\t\tfor(; temp = elements[i]; i++) {\n\t\t\t\t\tif((index = self.nodes.indexOf(temp.node || temp)) !== -1) {\n\t\t\t\t\t\tself.elements.splice(index, 1);\n\t\t\t\t\t\tself.nodes.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\teach: function(callback) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\tcallback.call(element, i);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tsetAttribute: function(attribute, value) {\n\t\t\t\treturn map.call(this, 'setAttribute', attribute, value);\n\t\t\t},\n\t\t\tsetAttributes: function(attributes) {\n\t\t\t\treturn map.call(this, 'setAttributes', attributes);\n\t\t\t},\n\t\t\tremoveAttribute: function(attribute) {\n\t\t\t\treturn map.call(this, 'removeAttribute', attribute);\n\t\t\t},\n\t\t\tremoveAttributes: function(attributes) {\n\t\t\t\treturn map.call(this, 'removeAttributes', attributes);\n\t\t\t},\n\t\t\tsetStyle: function(property, value) {\n\t\t\t\treturn map.call(this, 'setStyle', property, value);\n\t\t\t},\n\t\t\tsetStyles: function(properties) {\n\t\t\t\treturn map.call(this, 'setStyles', properties);\n\t\t\t},\n\t\t\tremoveStyle: function(property) {\n\t\t\t\treturn map.call(this, 'removeStyle', property);\n\t\t\t},\n\t\t\tremoveStyles: function(properties) {\n\t\t\t\treturn map.call(this, 'removeStyles', properties);\n\t\t\t},\n\t\t\taddClass: function(name) {\n\t\t\t\treturn map.call(this, 'addClass', name);\n\t\t\t},\n\t\t\tremoveClass: function(name) {\n\t\t\t\treturn map.call(this, 'removeClass', name);\n\t\t\t},\n\t\t\ttoggleClass: function(name) {\n\t\t\t\treturn map.call(this, 'toggleClass', name);\n\t\t\t},\n\t\t\tprependTo: function(target) {\n\t\t\t\treturn mapFragment.call(this, target, 'prepend');\n\t\t\t},\n\t\t\tappendTo: function(target) {\n\t\t\t\treturn mapFragment.call(this, target, 'append');\n\t\t\t},\n\t\t\tinsertBefore: function(target) {\n\t\t\t\tvar self = this;\n\n\t\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\t\tif(target && (target = target.node)) {\n\t\t\t\t\ttarget.parentNode.insertBefore(buildFragment(self.elements), target);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tinsertAfter: function(target) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tsibling, fragment;\n\n\t\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\t\tif(target && (target = target.node)) {\n\t\t\t\t\tfragment = buildFragment(self.elements);\n\n\t\t\t\t\t(sibling = target.nextSibling) ? target.parentNode.insertBefore(fragment, sibling) : target.parentNode.appendChild(fragment);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\treplace: function(target) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\tif(i === 0) {\n\t\t\t\t\t\telement.replace(target);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.insertAfter(elements[i - 1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tdetach: function() {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\telement.detach();\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tblur: function() {\n\t\t\t\treturn map.call(this, 'blur');\n\t\t\t},\n\t\t\ton: function() {\n\t\t\t\treturn map.apply(this, [ 'on' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\tone: function() {\n\t\t\t\treturn map.apply(this, [ 'one' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\toff: function() {\n\t\t\t\treturn map.apply(this, [ 'off' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\temit: function() {\n\t\t\t\treturn map.apply(this, [ 'emit' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t}\n\t\t};\n\n\t\treturn DomCollection;\n\t}\n\n\tprovide([ '/demand/validator/isTypeOf', '/demand/validator/isInstanceOf', '/demand/descriptor', './element' ], definition);\n}(document));\n"]}