{"version":3,"sources":["dom/collection.js"],"names":["document","definition","isTypeOf","isInstanceOf","Descriptor","DomElement","resolveElements","elements","selectors","selector","i","split","concat","arrayPrototypeSlice","call","querySelectorAll","exception","length","Array","isArray","map","method","element","self","this","parameter","arguments","apply","mapFragment","target","buildFragment","fragment","createDocumentFragment","appendChild","node","DomCollection","objectDefineProperty","add","prototype","slice","Object","defineProperty","get","index","temp","nodes","indexOf","push","remove","splice","each","callback","setAttribute","attribute","value","setAttributes","attributes","removeAttribute","removeAttributes","setStyle","property","setStyles","properties","removeStyle","removeStyles","addClass","name","removeClass","toggleClass","prependTo","appendTo","insertBefore","parentNode","insertAfter","sibling","nextSibling","replace","detach","on","one","off","emit","provide"],"mappings":"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","file":"collection.js","sourcesContent":["/**\n * @use /demand/validator/isTypeOf\n * @use /demand/validator/isInstanceOf\n * @use /demand/descriptor\n *\n * @require ../element\n */\n\n(function(document) {\n\t'use strict';\n\n\tfunction definition(isTypeOf, isInstanceOf, Descriptor, DomElement) {\n\t\tvar arrayPrototypeSlice  = Array.prototype.slice,\n\t\t\tobjectDefineProperty = Object.defineProperty;\n\n\t\tfunction resolveElements(elements) {\n\t\t\tvar selectors, selector, i = 0;\n\n\t\t\tif(isTypeOf(elements, 'string')) {\n\t\t\t\tselectors = elements.split(',');\n\t\t\t\telements  = [];\n\n\t\t\t\tfor(i = 0; selector = selectors[i]; i++) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\telements = elements.concat(arrayPrototypeSlice.call(document.querySelectorAll(selector)));\n\t\t\t\t\t} catch(exception) {} // eslint-disable-line no-empty\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(elements.length && !Array.isArray(elements)) {\n\t\t\t\telements = arrayPrototypeSlice.call(elements);\n\t\t\t}\n\n\t\t\tif(!Array.isArray(elements)) {\n\t\t\t\telements = [ elements ];\n\t\t\t}\n\n\t\t\treturn elements;\n\t\t}\n\n\t\tfunction map(method) {\n\t\t\tvar self      = this,\n\t\t\t\telements  = self.elements,\n\t\t\t\tparameter = arrayPrototypeSlice.call(arguments, 1),\n\t\t\t\ti = 0, element;\n\n\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\telement[method].apply(element, parameter);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction mapFragment(target, method) {\n\t\t\tvar self = this;\n\n\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\tif(target) {\n\t\t\t\ttarget[method].call(target, buildFragment(self.elements));\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction buildFragment(elements) {\n\t\t\tvar fragment = document.createDocumentFragment(),\n\t\t\t\ti = 0, element;\n\n\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\tfragment.appendChild(element.node);\n\t\t\t}\n\n\t\t\treturn fragment;\n\t\t}\n\n\t\tfunction DomCollection(elements) {\n\t\t\tvar self = this;\n\n\t\t\tobjectDefineProperty(self, 'elements', new Descriptor([]));\n\t\t\tobjectDefineProperty(self, 'nodes', new Descriptor([]));\n\n\t\t\tif(elements) {\n\t\t\t\tself.add(elements);\n\t\t\t}\n\t\t\t\n\t\t\treturn self;\n\t\t}\n\n\t\tDomCollection.prototype = {\n\t\t\t/* only for reference\n\t\t\telements: null,\n\t\t\tnodes:    null\n\t\t\t*/\n\t\t\tget length() {\n\t\t\t\treturn this.elements.length;\n\t\t\t},\n\t\t\tget: function(index) {\n\t\t\t\treturn this.elements[index];\n\t\t\t},\n\t\t\tadd: function(elements) {\n\t\t\t\tvar self = this,\n\t\t\t\t\ti = 0, temp;\n\n\t\t\t\telements = resolveElements(elements);\n\n\t\t\t\tfor(; temp = elements[i]; i++) {\n\t\t\t\t\tif(self.nodes.indexOf(temp.node || temp) === -1) {\n\t\t\t\t\t\ttemp = isInstanceOf(temp, DomElement) ? temp : new DomElement(temp);\n\n\t\t\t\t\t\tself.elements.push(temp);\n\t\t\t\t\t\tself.nodes.push(temp.node);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tremove: function(elements) {\n\t\t\t\tvar self = this,\n\t\t\t\t\ti = 0, temp, index;\n\n\t\t\t\telements = resolveElements(elements);\n\n\t\t\t\tfor(; temp = elements[i]; i++) {\n\t\t\t\t\tif((index = self.nodes.indexOf(temp.node || temp)) !== -1) {\n\t\t\t\t\t\tself.elements.splice(index, 1);\n\t\t\t\t\t\tself.nodes.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\teach: function(callback) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\tcallback.call(element, i);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tsetAttribute: function(attribute, value) {\n\t\t\t\treturn map.call(this, 'setAttribute', attribute, value);\n\t\t\t},\n\t\t\tsetAttributes: function(attributes) {\n\t\t\t\treturn map.call(this, 'setAttributes', attributes);\n\t\t\t},\n\t\t\tremoveAttribute: function(attribute) {\n\t\t\t\treturn map.call(this, 'removeAttribute', attribute);\n\t\t\t},\n\t\t\tremoveAttributes: function(attributes) {\n\t\t\t\treturn map.call(this, 'removeAttributes', attributes);\n\t\t\t},\n\t\t\tsetStyle: function(property, value) {\n\t\t\t\treturn map.call(this, 'setStyle', property, value);\n\t\t\t},\n\t\t\tsetStyles: function(properties) {\n\t\t\t\treturn map.call(this, 'setStyles', properties);\n\t\t\t},\n\t\t\tremoveStyle: function(property) {\n\t\t\t\treturn map.call(this, 'removeStyle', property);\n\t\t\t},\n\t\t\tremoveStyles: function(properties) {\n\t\t\t\treturn map.call(this, 'removeStyles', properties);\n\t\t\t},\n\t\t\taddClass: function(name) {\n\t\t\t\treturn map.call(this, 'addClass', name);\n\t\t\t},\n\t\t\tremoveClass: function(name) {\n\t\t\t\treturn map.call(this, 'removeClass', name);\n\t\t\t},\n\t\t\ttoggleClass: function(name) {\n\t\t\t\treturn map.call(this, 'toggleClass', name);\n\t\t\t},\n\t\t\tprependTo: function(target) {\n\t\t\t\treturn mapFragment.call(this, target, 'prepend');\n\t\t\t},\n\t\t\tappendTo: function(target) {\n\t\t\t\treturn mapFragment.call(this, target, 'append');\n\t\t\t},\n\t\t\tinsertBefore: function(target) {\n\t\t\t\tvar self = this;\n\n\t\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\t\tif(target && (target = target.node)) {\n\t\t\t\t\ttarget.parentNode.insertBefore(buildFragment(self.elements), target);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tinsertAfter: function(target) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tsibling, fragment;\n\n\t\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\t\tif(target && (target = target.node)) {\n\t\t\t\t\tfragment = buildFragment(self.elements);\n\n\t\t\t\t\t(sibling = target.nextSibling) ? target.parentNode.insertBefore(fragment, sibling) : target.parentNode.appendChild(fragment);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\treplace: function(target) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\tif(i === 0) {\n\t\t\t\t\t\telement.replace(target);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.insertAfter(elements[i - 1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tdetach: function() {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\telement.detach();\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\ton: function() {\n\t\t\t\treturn map.apply(this, [ 'on' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\tone: function() {\n\t\t\t\treturn map.apply(this, [ 'one' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\toff: function() {\n\t\t\t\treturn map.apply(this, [ 'off' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\temit: function() {\n\t\t\t\treturn map.apply(this, [ 'emit' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t}\n\t\t};\n\n\t\treturn DomCollection;\n\t}\n\n\tprovide([ '/demand/validator/isTypeOf', '/demand/validator/isInstanceOf', '/demand/descriptor', './element' ], definition);\n}(document));"]}