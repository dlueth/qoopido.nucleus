{"version":3,"sources":["dom/collection.js"],"names":["document","provide","isTypeOf","isInstanceOf","Descriptor","DomElement","arrayPrototypeSlice","Array","prototype","slice","objectDefineProperty","Object","defineProperty","resolveElements","elements","selectors","selector","i","split","concat","call","querySelectorAll","exception","length","isArray","map","method","element","this","parameter","arguments","apply","mapFragment","target","buildFragment","fragment","createDocumentFragment","appendChild","node","DomCollection","self","add","get","index","temp","nodes","indexOf","push","remove","splice","each","callback","setAttribute","attribute","value","setAttributes","attributes","removeAttribute","removeAttributes","setStyle","property","setStyles","properties","removeStyle","removeStyles","addClass","name","removeClass","toggleClass","prependTo","appendTo","insertBefore","parentNode","insertAfter","sibling","nextSibling","replace","detach","blur","on","one","off","emit"],"mappings":"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","file":"collection.js","sourcesContent":["/**\n * @use /demand/validator/isTypeOf\n * @use /demand/validator/isInstanceOf\n * @use /demand/descriptor\n *\n * @require ../element\n */\n\n(function(document) {\n\t'use strict';\n\n\tfunction definition(isTypeOf, isInstanceOf, Descriptor, DomElement) {\n\t\tvar arrayPrototypeSlice  = Array.prototype.slice,\n\t\t\tobjectDefineProperty = Object.defineProperty;\n\n\t\tfunction resolveElements(elements) {\n\t\t\tvar selectors, selector, i = 0;\n\n\t\t\tif(isTypeOf(elements, 'string')) {\n\t\t\t\tselectors = elements.split(',');\n\t\t\t\telements  = [];\n\n\t\t\t\tfor(i = 0; selector = selectors[i]; i++) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\telements = elements.concat(arrayPrototypeSlice.call(document.querySelectorAll(selector)));\n\t\t\t\t\t} catch(exception) {} // eslint-disable-line no-empty\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(elements.length && !Array.isArray(elements)) {\n\t\t\t\telements = arrayPrototypeSlice.call(elements);\n\t\t\t}\n\n\t\t\tif(!Array.isArray(elements)) {\n\t\t\t\telements = [ elements ];\n\t\t\t}\n\n\t\t\treturn elements;\n\t\t}\n\n\t\tfunction map(method) {\n\t\t\tvar self      = this,\n\t\t\t\telements  = self.elements,\n\t\t\t\tparameter = arrayPrototypeSlice.call(arguments, 1),\n\t\t\t\ti = 0, element;\n\n\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\telement[method].apply(element, parameter);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction mapFragment(target, method) {\n\t\t\tvar self = this;\n\n\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\tif(target) {\n\t\t\t\ttarget[method].call(target, buildFragment(self.elements));\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction buildFragment(elements) {\n\t\t\tvar fragment = document.createDocumentFragment(),\n\t\t\t\ti = 0, element;\n\n\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\tfragment.appendChild(element.node);\n\t\t\t}\n\n\t\t\treturn fragment;\n\t\t}\n\n\t\tfunction DomCollection(elements) {\n\t\t\tvar self = this;\n\n\t\t\tobjectDefineProperty(self, 'elements', new Descriptor([]));\n\t\t\tobjectDefineProperty(self, 'nodes', new Descriptor([]));\n\n\t\t\tif(elements) {\n\t\t\t\tself.add(elements);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tDomCollection.prototype = {\n\t\t\t/* only for reference\n\t\t\telements: null,\n\t\t\tnodes:    null\n\t\t\t*/\n\t\t\tget length() {\n\t\t\t\treturn this.elements.length;\n\t\t\t},\n\t\t\tget: function(index) {\n\t\t\t\treturn this.elements[index];\n\t\t\t},\n\t\t\tadd: function(elements) {\n\t\t\t\tvar self = this,\n\t\t\t\t\ti = 0, temp;\n\n\t\t\t\telements = resolveElements(elements);\n\n\t\t\t\tfor(; temp = elements[i]; i++) {\n\t\t\t\t\tif(self.nodes.indexOf(temp.node || temp) === -1) {\n\t\t\t\t\t\ttemp = isInstanceOf(temp, DomElement) ? temp : new DomElement(temp);\n\n\t\t\t\t\t\tself.elements.push(temp);\n\t\t\t\t\t\tself.nodes.push(temp.node);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tremove: function(elements) {\n\t\t\t\tvar self = this,\n\t\t\t\t\ti = 0, temp, index;\n\n\t\t\t\telements = resolveElements(elements);\n\n\t\t\t\tfor(; temp = elements[i]; i++) {\n\t\t\t\t\tif((index = self.nodes.indexOf(temp.node || temp)) !== -1) {\n\t\t\t\t\t\tself.elements.splice(index, 1);\n\t\t\t\t\t\tself.nodes.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\teach: function(callback) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\tcallback.call(element, i);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tsetAttribute: function(attribute, value) {\n\t\t\t\treturn map.call(this, 'setAttribute', attribute, value);\n\t\t\t},\n\t\t\tsetAttributes: function(attributes) {\n\t\t\t\treturn map.call(this, 'setAttributes', attributes);\n\t\t\t},\n\t\t\tremoveAttribute: function(attribute) {\n\t\t\t\treturn map.call(this, 'removeAttribute', attribute);\n\t\t\t},\n\t\t\tremoveAttributes: function(attributes) {\n\t\t\t\treturn map.call(this, 'removeAttributes', attributes);\n\t\t\t},\n\t\t\tsetStyle: function(property, value) {\n\t\t\t\treturn map.call(this, 'setStyle', property, value);\n\t\t\t},\n\t\t\tsetStyles: function(properties) {\n\t\t\t\treturn map.call(this, 'setStyles', properties);\n\t\t\t},\n\t\t\tremoveStyle: function(property) {\n\t\t\t\treturn map.call(this, 'removeStyle', property);\n\t\t\t},\n\t\t\tremoveStyles: function(properties) {\n\t\t\t\treturn map.call(this, 'removeStyles', properties);\n\t\t\t},\n\t\t\taddClass: function(name) {\n\t\t\t\treturn map.call(this, 'addClass', name);\n\t\t\t},\n\t\t\tremoveClass: function(name) {\n\t\t\t\treturn map.call(this, 'removeClass', name);\n\t\t\t},\n\t\t\ttoggleClass: function(name) {\n\t\t\t\treturn map.call(this, 'toggleClass', name);\n\t\t\t},\n\t\t\tprependTo: function(target) {\n\t\t\t\treturn mapFragment.call(this, target, 'prepend');\n\t\t\t},\n\t\t\tappendTo: function(target) {\n\t\t\t\treturn mapFragment.call(this, target, 'append');\n\t\t\t},\n\t\t\tinsertBefore: function(target) {\n\t\t\t\tvar self = this;\n\n\t\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\t\tif(target && (target = target.node)) {\n\t\t\t\t\ttarget.parentNode.insertBefore(buildFragment(self.elements), target);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tinsertAfter: function(target) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tsibling, fragment;\n\n\t\t\t\ttarget = isInstanceOf(target, DomElement) ? target : new DomElement(target);\n\n\t\t\t\tif(target && (target = target.node)) {\n\t\t\t\t\tfragment = buildFragment(self.elements);\n\n\t\t\t\t\t(sibling = target.nextSibling) ? target.parentNode.insertBefore(fragment, sibling) : target.parentNode.appendChild(fragment);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\treplace: function(target) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\tif(i === 0) {\n\t\t\t\t\t\telement.replace(target);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.insertAfter(elements[i - 1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tdetach: function() {\n\t\t\t\tvar self     = this,\n\t\t\t\t\telements = self.elements,\n\t\t\t\t\ti = 0, element;\n\n\t\t\t\tfor(; element = elements[i]; i++) {\n\t\t\t\t\telement.detach();\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tblur: function() {\n\t\t\t\treturn map.call(this, 'blur');\n\t\t\t},\n\t\t\ton: function() {\n\t\t\t\treturn map.apply(this, [ 'on' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\tone: function() {\n\t\t\t\treturn map.apply(this, [ 'one' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\toff: function() {\n\t\t\t\treturn map.apply(this, [ 'off' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t},\n\t\t\temit: function() {\n\t\t\t\treturn map.apply(this, [ 'emit' ].concat(arrayPrototypeSlice.call(arguments)));\n\t\t\t}\n\t\t};\n\n\t\treturn DomCollection;\n\t}\n\n\tprovide([ '/demand/validator/isTypeOf', '/demand/validator/isInstanceOf', '/demand/descriptor', './element' ], definition);\n}(document));\n"]}