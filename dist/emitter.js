!function(h){"use strict";provide(["/demand/weakmap","/demand/function/iterate"],function(t,s){var i=/^(_|((get|has|is)([A-Z]|$))|(on|one|off|emit|constructor)$)/,f=Object.defineProperty,c=Object.getOwnPropertyNames,p=Object.getOwnPropertyDescriptor,e=Object.getPrototypeOf,u=Object.prototype,a=new t;function r(){var n=this,o=n.constructor.prototype;(function(t){var e,r,n,o=t,i=[];try{for(;o!==u;){for(e=c(o),r=0;n=e[r];r++)-1===i.indexOf(n)&&i.push(n);o=o.__proto__}}catch(t){}return i})(o).forEach(function(e){var r,t=function(t,e){for(var r,n=t;n&&!(r=p(n,e));)n=n.__proto__;return r}(o,e);"function"==typeof n[e]&&!1===i.test(e)&&(r=e.charAt(0).toUpperCase()+e.slice(1),t.value=function(){var t;return n.emit("pre"+r,arguments),t=o[e].apply(n,arguments),n.emit("post"+r,arguments,t),t},f(n,e,t))})}function n(){return a.set(this,{}),e(self)!==n.prototype&&r.call(this),this}return n.prototype={on:function(t,e){var r,n=a.get(this),o=0;for(t=t.split(" ");(r=t[o])!==h;o++)(n[r]=n[r]||[]).push(e);return this},one:function(r,n,o){var i=this;return o=!1!==o,i.on(r,function t(e){i.off(!0===o?e:r,t),n.apply(this,arguments)}),i},off:function(t,e){var r,n,o,i=a.get(this),f=0;if(t)for(t=t.split(" ");(r=t[f])!==h;f++)if(i[r]=i[r]||[],e)for(n=0;(o=i[r][n])!==h;n++)o===e&&(i[r].splice(n,1),n--);else i[r].length=0;else s(this.listener,function(t){i[t].length=0});return this},emit:function(t){var e,r,n,o=0;if(t)for((e=a.get(this))[t]=e[t]||[],r=e[t].slice();(n=r[o])!==h;o++)n.apply(this,arguments);return this}},n})}();
//# sourceMappingURL=emitter.js.map
