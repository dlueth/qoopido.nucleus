!function(t){"use strict";provide(["/demand/class/weakmap","/demand/function/iterate"],function(e,r){var n=/^(_|((get|has|is)([A-Z]|$))|(on|one|off|emit|constructor)$)/,o=Object.defineProperty,i=Object.getOwnPropertyNames,s=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,c=Object.prototype,p=new e;function u(){var t=this,e=t.constructor.prototype;(function(t){var e,r,n,o=t,s=[];try{for(;o!==c;){for(e=i(o),r=0;n=e[r];r++)-1===s.indexOf(n)&&s.push(n);o=o.__proto__}}catch(t){}return s})(e).forEach(function(r){var i,f=function(t,e){for(var r,n=t;n&&!(r=s(n,e));)n=n.__proto__;return r}(e,r);"function"==typeof t[r]&&!1===n.test(r)&&(i=r.charAt(0).toUpperCase()+r.slice(1),f.value=function(){var n;return t.emit("pre"+i,arguments),n=e[r].apply(t,arguments),t.emit("post"+i,arguments,n),n},o(t,r,f))})}function a(){return p.set(this,{}),f(self)!==a.prototype&&u.call(this),this}return a.prototype={on:function(e,r){var n,o=p.get(this),i=0;for(e=e.split(" ");(n=e[i])!==t;i++)(o[n]=o[n]||[]).push(r);return this},one:function(t,e,r){var n=this;return r=!1!==r,n.on(t,function o(i){n.off(!0===r?i:t,o),e.apply(this,arguments)}),n},off:function(e,n){var o,i,s,f=p.get(this),c=0;if(e)for(e=e.split(" ");(o=e[c])!==t;c++)if(f[o]=f[o]||[],n)for(i=0;(s=f[o][i])!==t;i++)s===n&&(f[o].splice(i,1),i--);else f[o].length=0;else r(this.listener,function(t){f[t].length=0});return this},emit:function(e){var r,n,o,i=0;if(e)for((r=p.get(this))[e]=r[e]||[],n=r[e].slice();(o=n[i])!==t;i++)o.apply(this,arguments);return this}},a})}();
//# sourceMappingURL=emitter.js.map
