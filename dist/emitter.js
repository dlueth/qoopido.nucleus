!function(t){"use strict";provide(["/demand/weakmap","/demand/function/iterate"],function(e,r){var n=/^(_|((get|has|is)([A-Z]|$))|(on|one|off|emit|constructor)$)/,o=Object.defineProperty,i=Object.getOwnPropertyNames,f=Object.getOwnPropertyDescriptor,s=Object.getPrototypeOf,c=Object.prototype,p=new e;function u(){var t=this,e=t.constructor.prototype;(function(t){var e,r,n,o=t,f=[];try{for(;o!==c;){for(e=i(o),r=0;n=e[r];r++)-1===f.indexOf(n)&&f.push(n);o=o.__proto__}}catch(t){}return f})(e).forEach(function(r){var i,s=function(t,e){for(var r,n=t;n&&!(r=f(n,e));)n=n.__proto__;return r}(e,r);"function"==typeof t[r]&&!1===n.test(r)&&(i=r.charAt(0).toUpperCase()+r.slice(1),s.value=function(){var n;return t.emit("pre"+i,arguments),n=e[r].apply(t,arguments),t.emit("post"+i,arguments,n),n},o(t,r,s))})}function a(){return p.set(this,{}),s(self)!==a.prototype&&u.call(this),this}return a.prototype={on:function(e,r){var n,o=p.get(this),i=0;for(e=e.split(" ");(n=e[i])!==t;i++)(o[n]=o[n]||[]).push(r);return this},one:function(t,e,r){var n=this;return r=!1!==r,n.on(t,function o(i){n.off(!0===r?i:t,o),e.apply(this,arguments)}),n},off:function(e,n){var o,i,f,s=p.get(this),c=0;if(e)for(e=e.split(" ");(o=e[c])!==t;c++)if(s[o]=s[o]||[],n)for(i=0;(f=s[o][i])!==t;i++)f===n&&(s[o].splice(i,1),i--);else s[o].length=0;else r(this.listener,function(t){s[t].length=0});return this},emit:function(e){var r,n,o,i=0;if(e)for((r=p.get(this))[e]=r[e]||[],n=r[e].slice();(o=n[i])!==t;i++)o.apply(this,arguments);return this}},a})}();
//# sourceMappingURL=emitter.js.map
