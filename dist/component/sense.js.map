{"version":3,"sources":["component/sense.js"],"names":["global","provide","matchMedia","Weakmap","Emitter","storage","ComponentSense","query","self","call","this","mql","set","addListener","emit","matches","prototype","get","extends"],"mappings":";CAQC,SAASA,GACT,aA+BAC,QAAQ,CAAE,kBAAmB,aAAcD,EAAOE,YAAc,kCA7BhE,SAAoBC,EAASC,EAASF,GACrC,IAAIG,EAAU,IAAIF,EAElB,SAASG,EAAeC,GACvB,IAAIC,EAAOJ,EAAQK,KAAKC,MACvBC,EAAOT,EAAWK,GAQnB,OANAF,EAAQO,IAAIJ,EAAMG,GAElBA,EAAIE,aAAY,WACfL,EAAKM,MAAqB,IAAhBH,EAAII,QAAmB,QAAU,cAGrCP,EAaR,OAVAF,EAAeU,UAAY,CAC1BD,cACC,IAAIJ,EAAMN,EAAQY,IAAIP,MAEtB,GAAGC,EACF,OAAOA,EAAII,UAKPT,EAAeY,QAAQd,MA7BhC,CAiCEM","file":"sense.js","sourcesContent":["/**\n * @use /demand/weakmap\n *\n * @require ../emitter\n *\n * @polyfill ../polyfill/window/matchmedia\n */\n\n(function(global) {\n\t'use strict';\n\n\tfunction definition(Weakmap, Emitter, matchMedia) {\n\t\tvar storage = new Weakmap;\n\n\t\tfunction ComponentSense(query) {\n\t\t\tvar self = Emitter.call(this),\n\t\t\t\tmql  = matchMedia(query);\n\n\t\t\tstorage.set(self, mql);\n\n\t\t\tmql.addListener(function() {\n\t\t\t\tself.emit(mql.matches === true ? 'match' : 'unmatch');\n\t\t\t});\n\n\t\t\treturn self;\n\t\t}\n\n\t\tComponentSense.prototype = {\n\t\t\tget matches() {\n\t\t\t\tvar mql = storage.get(this);\n\n\t\t\t\tif(mql) {\n\t\t\t\t\treturn mql.matches;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn ComponentSense.extends(Emitter);\n\t}\n\n\tprovide([ '/demand/weakmap', '../emitter', global.matchMedia || '../polyfill/window/matchmedia' ], definition);\n}(this));\n"]}