{"version":3,"sources":["hooks/event.js"],"names":["global","document","undefined","definition","iterate","transferProperties","event","originalEvent","properties","property","i","add","aHook","storage","get","process","isMatch","id","hook","match","test","type","delegate","NULL","general","split","pointer","isDefaultPrevented","isPropagationStopped","metaKey","target","srcElement","nodeType","parentNode","path","push","mouse","fromElement","which","button","pageX","clientX","ownerDocument","documentElement","body","scrollLeft","clientLeft","pageY","clientY","scrollTop","clientTop","relatedTarget","toElement","key","charCode","keyCode","provide","this"],"mappings":"CAIC,SAASA,EAAQC,EAAUC,GAC3B,YAEA,SAASC,GAAWC,GAsEnB,QAASC,GAAmBC,EAAOC,EAAeC,GAIjD,IAHA,GACCC,GADGC,EAAI,EAGFD,EAAWD,EAAWE,GAAIA,IAC/BJ,EAAMG,GAAYF,EAAcE,GAIlC,QAASE,GAAIF,EAAUG,GACnBH,GAAYG,GAASC,EAAQJ,KAC/BI,EAAQJ,GAAYG,GAItB,QAASE,GAAIL,GACZ,GAAGA,GAAYI,EAAQJ,GACtB,MAAOI,GAAQJ,GAIjB,QAASM,GAAQT,EAAOC,GACvB,GAAIS,EAEJZ,GAAQS,EAAS,SAASI,EAAIC,GAC7BF,GAAWE,EAAKC,OAASD,EAAKC,MAAMC,KAAKb,EAAcc,MAEpDL,IACCE,EAAKV,YACPH,EAAmBC,EAAOC,EAAeW,EAAKV,YAG5CU,EAAKH,SACPG,EAAKH,QAAQT,EAAOC,GAGlBW,EAAKI,WACPhB,EAAMgB,SAAWJ,EAAKI,aA1G1B,GAAIC,GAAU,KACbV,GACCW,SACChB,WAAY,kIAAkIiB,MAAM,KACpJV,QAAY,SAAST,EAAOC,GAC3B,GAAImB,EAeJ,IAbApB,EAAMC,cAAuBA,EAC7BD,EAAMqB,qBAA0BpB,EAA8B,iBAC9DD,EAAMsB,uBAA0BrB,EAA0B,aAC1DD,EAAMuB,WAAwBtB,EAAcsB,SAAWtB,EAAcsB,WAAY,GAE7EvB,EAAMwB,SACTxB,EAAMwB,OAASvB,EAAcwB,YAAc9B,GAGf,IAA1BK,EAAMwB,OAAOE,WACf1B,EAAMwB,OAASxB,EAAMwB,OAAOG,aAGzB3B,EAAM4B,KAAM,CACf5B,EAAM4B,QACNR,EAAapB,EAAMwB,MAEnB,GACCxB,GAAM4B,KAAKC,KAAKT,SACTA,EAAUA,EAAQO,WAE1B3B,GAAM4B,KAAKC,KAAKnC,MAInBoC,OACCjB,MAAY,sEACZX,WAAY,6JAA6JiB,MAAM,KAC/KV,QAAY,SAAST,EAAOC,GAC3B,GAAImB,GAASW,EAAaC,CAE1BD,GAAc9B,EAAc8B,YAC5BC,EAAc/B,EAAcgC,OAEzBjC,EAAMkC,QAAUjB,GAAQhB,EAAckC,UAAYlB,IACpDG,EAAUpB,EAAMwB,OAAOY,eAAiBzC,EACxCyB,EAAUA,EAAQiB,iBAAmBjB,EAAQkB,KAE7CtC,EAAMkC,MAAQjC,EAAckC,SAAWf,EAAQmB,YAAc,IAAMnB,EAAQoB,YAAc,GACzFxC,EAAMyC,MAAQxC,EAAcyC,SAAWtB,EAAQuB,WAAc,IAAMvB,EAAQwB,WAAc,KAGtF5C,EAAM6C,eAAiBd,IAC1B/B,EAAM6C,cAAiBd,IAAgB/B,EAAMwB,OAAUvB,EAAc6C,UAAYf,GAG9E/B,EAAMgC,OAASA,IAAUpC,IAC5BI,EAAMgC,MAAiB,EAARA,EAAY,EAAa,EAARA,EAAY,EAAa,EAARA,EAAY,EAAI,KAIpEe,KACClC,MAAY,WACZX,WAAY,4BAA4BiB,MAAM,KAC9CV,QAAY,SAAST,EAAOC,GACxBD,EAAMgC,QAAUf,IAClBjB,EAAMgC,MAAS/B,EAAc+C,WAAa/B,EAAQhB,EAAc+C,SAAW/C,EAAcgD,WAiD9F,QAAS5C,IAAKA,EAAKG,IAAKA,EAAKC,QAASA,GAGvCyC,SAAU,4BAA8BrD,IACvCsD,KAAMxD","file":"event.js","sourcesContent":["/**\n * @use /demand/function/iterate\n */\n\n(function(global, document, undefined) {\n\t'use strict';\n\n\tfunction definition(iterate) {\n\t\tvar NULL    = null,\n\t\t\tstorage = {\n\t\t\t\tgeneral: {\n\t\t\t\t\tproperties: 'type altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which path'.split(' '),\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tvar pointer;\n\n\t\t\t\t\t\tevent.originalEvent        = originalEvent;\n\t\t\t\t\t\tevent.isDefaultPrevented   = !!(originalEvent.defaultPrevented);\n\t\t\t\t\t\tevent.isPropagationStopped = !!(originalEvent.cancelBubble);\n\t\t\t\t\t\tevent.metaKey              = (originalEvent.metaKey && originalEvent.metaKey !== false) ? true : false;\n\n\t\t\t\t\t\tif(!event.target) {\n\t\t\t\t\t\t\tevent.target = originalEvent.srcElement || document;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(event.target.nodeType === 3) {\n\t\t\t\t\t\t\tevent.target = event.target.parentNode;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(!event.path) {\n\t\t\t\t\t\t\tevent.path = [];\n\t\t\t\t\t\t\tpointer    = event.target;\n\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\tevent.path.push(pointer);\n\t\t\t\t\t\t\t} while(pointer = pointer.parentNode);\n\n\t\t\t\t\t\t\tevent.path.push(global);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmouse: {\n\t\t\t\t\tmatch:      /^(?:mouse|pointer|contextmenu|touch|click|dblclick|drag|drop|wheel)/,\n\t\t\t\t\tproperties: 'button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement dataTransfer deltaX deltaY deltaZ deltaMode targetTouches'.split(' '),\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tvar pointer, fromElement, which;\n\n\t\t\t\t\t\tfromElement = originalEvent.fromElement;\n\t\t\t\t\t\twhich       = originalEvent.button;\n\n\t\t\t\t\t\tif(event.pageX === NULL && originalEvent.clientX !== NULL) {\n\t\t\t\t\t\t\tpointer = event.target.ownerDocument || document;\n\t\t\t\t\t\t\tpointer = pointer.documentElement || pointer.body;\n\n\t\t\t\t\t\t\tevent.pageX = originalEvent.clientX + (pointer.scrollLeft || 0) - (pointer.clientLeft || 0);\n\t\t\t\t\t\t\tevent.pageY = originalEvent.clientY + (pointer.scrollTop  || 0) - (pointer.clientTop  || 0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(!event.relatedTarget && fromElement) {\n\t\t\t\t\t\t\tevent.relatedTarget = (fromElement === event.target) ? originalEvent.toElement : fromElement;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(!event.which && which !== undefined) {\n\t\t\t\t\t\t\tevent.which = (which & 1 ? 1 : (which & 2 ? 3 : (which & 4 ? 2 : 0)));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tkey: {\n\t\t\t\t\tmatch:      /^(?:key)/,\n\t\t\t\t\tproperties: 'char charCode key keyCode'.split(' '),\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tif(event.which === NULL) {\n\t\t\t\t\t\t\tevent.which = (originalEvent.charCode !== NULL) ? originalEvent.charCode : originalEvent.keyCode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\tfunction transferProperties(event, originalEvent, properties) {\n\t\t\tvar i = 0,\n\t\t\t\tproperty;\n\n\t\t\tfor(; property = properties[i]; i++) {\n\t\t\t\tevent[property] = originalEvent[property];\n\t\t\t}\n\t\t}\n\n\t\tfunction add(property, aHook) {\n\t\t\tif(property && aHook && storage[property]) {\n\t\t\t\tstorage[property] = aHook;\n\t\t\t}\n\t\t}\n\n\t\tfunction get(property) {\n\t\t\tif(property && storage[property]) {\n\t\t\t\treturn storage[property];\n\t\t\t}\n\t\t}\n\n\t\tfunction process(event, originalEvent) {\n\t\t\tvar isMatch;\n\n\t\t\titerate(storage, function(id, hook) {\n\t\t\t\tisMatch = !hook.match || hook.match.test(originalEvent.type);\n\n\t\t\t\tif(isMatch) {\n\t\t\t\t\tif(hook.properties) {\n\t\t\t\t\t\ttransferProperties(event, originalEvent, hook.properties);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(hook.process) {\n\t\t\t\t\t\thook.process(event, originalEvent);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(hook.delegate) {\n\t\t\t\t\t\tevent.delegate = hook.delegate;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn { add: add, get: get, process: process };\n\t}\n\n\tprovide([ '/demand/function/iterate' ], definition);\n}(this, document));"]}