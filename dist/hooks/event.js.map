{"version":3,"sources":["hooks/event.js"],"names":["global","document","provide","iterate","objectDefineProperty","Object","defineProperty","objectDefineProperties","defineProperties","storage","general","properties","split","relatedTarget","match","process","event","originalEvent","value","fromElement","target","toElement","enumerable","metaKey","whichKeyboard","which","charCode","keyCode","whichMouse","pageX","documentElement","ownerDocument","clientX","scrollLeft","clientLeft","pageY","clientY","scrollTop","clientTop","add","property","aHook","get","id","hook","test","type","definitions","i","transferProperties","this"],"mappings":";CAIC,SAASA,EAAQC,GACjB,aAsIAC,QAAQ,CAAE,6BApIV,SAAoBC,GACnB,IAAIC,EAAyBC,OAAOC,eACnCC,EAAyBF,OAAOG,iBAChCC,EAAU,CACTC,QAAS,CACRC,WAAY,4PAA4PC,MAAM,MAE/QC,cAAe,CACdC,MAAY,+FACZC,QAAY,SAASC,EAAOC,GAC3Bb,EAAqBY,EAAO,gBAAiB,CAAEE,MACtCD,EAAcJ,eAAkBI,EAAcE,cAAgBH,EAAMI,OAAUH,EAAcI,UAAYJ,EAAcE,YACxHG,YAAY,MAGrBC,QAAS,CACRT,MAAY,4CACZC,QAAY,SAASC,EAAOC,GAC3Bb,EAAqBY,EAAO,UAAW,CACtCE,MAAYD,EAAcM,UAAqC,IAA1BN,EAAcM,QACnDD,YAAY,MAIfE,cAAe,CACdV,MAAY,WACZC,QAAY,SAASC,EAAOC,GAC3Bb,EAAqBY,EAAO,QAAS,CACpCE,OAAcD,EAAcQ,OAAiC,IAAxBR,EAAcQ,QAAgBR,EAAcQ,QAAuC,OAA3BR,EAAcS,SAAqBT,EAAcS,SAAWT,EAAcU,SACvKL,YAAY,MAIfM,WAAY,CACXd,MAAY,wCACZC,QAAY,SAASC,EAAOC,GAC3Bb,EAAqBY,EAAO,QAAS,CACpCE,OAAcD,EAAcQ,OAAiC,IAAxBR,EAAcQ,QAAgBR,EAAcQ,QAAiC,EAAtBR,EAAcQ,MAAY,EAA2B,EAAtBR,EAAcQ,MAAY,EAA2B,EAAtBR,EAAcQ,MAAY,EAAI,GACxLH,YAAY,MAIfO,MAAO,CACNf,MAAY,gEACZC,QAAY,SAASC,EAAOC,GAEb,IACRa,EAFN1B,EAAqBY,EAAO,QAAS,CACpCE,MAGmC,oBAAxBD,EAAcY,MAChBZ,EAAcY,OAGtBC,GAAmBd,EAAMI,OAAOW,eAAiB9B,GAAU6B,gBAEpDb,EAAce,SAAWF,EAAgBG,YAAc,IAAMH,EAAgBI,YAAc,IAEnGZ,YAAY,MAIfa,MAAO,CACNrB,MAAY,sEACZC,QAAY,SAASC,EAAOC,GAElB,IACHa,EAFN1B,EAAqBY,EAAO,QAAS,CACpCE,MAGmC,oBAAxBD,EAAckB,MAChBlB,EAAckB,OAGtBL,GAAmBd,EAAMI,OAAOW,eAAiB9B,GAAU6B,gBAEpDb,EAAcmB,SAAWN,EAAgBO,WAAc,IAAMP,EAAgBQ,WAAc,IAEnGhB,YAAY,OAqDjB,MAAO,CAAEiB,IAhCT,SAAaC,EAAUC,GACnBD,GAAYC,GAAShC,EAAQ+B,KAC/B/B,EAAQ+B,GAAYC,IA8BHC,IA1BnB,SAAaF,GACZ,GAAGA,GAAY/B,EAAQ+B,GACtB,OAAO/B,EAAQ+B,IAwBYzB,QApB7B,SAAiBC,EAAOC,GAiBvB,OAdAd,EAAQM,GAAS,SAASkC,EAAIC,KAClBA,EAAK9B,OAAS8B,EAAK9B,MAAM+B,KAAK5B,EAAc6B,SAGnDF,EAAKjC,YAlCX,SAA4BK,EAAOC,EAAeN,GAGjD,IAFA,IAA6B6B,EAAzBO,EAAc,GAAIC,EAAI,EAEnBR,EAAW7B,EAAWqC,GAAKA,IACK,oBAA5B/B,EAAcuB,KACvBO,EAAYP,GAAY,CACvBtB,MAAYD,EAAcuB,GAC1BlB,YAAY,IAKff,EAAuBS,EAAO+B,GAuB3BE,CAAmBjC,EAAOC,EAAe2B,EAAKjC,YAG5CiC,EAAK7B,SACP6B,EAAK7B,QAAQC,EAAOC,OAKhBD,OAjIV,CAwIEkC,EAAMjD","file":"event.js","sourcesContent":["/**\n * @use /demand/function/iterate\n */\n\n(function(global, document) {\n\t'use strict';\n\n\tfunction definition(iterate) {\n\t\tvar objectDefineProperty   = Object.defineProperty,\n\t\t\tobjectDefineProperties = Object.defineProperties,\n\t\t\tstorage = {\n\t\t\t\tgeneral: {\n\t\t\t\t\tproperties: 'bubbles cancelable isTrusted timeStamp type view altKey ctrlKey shiftKey button buttons clientX clientY fromElement offsetX offsetY screenX screenY toElement dataTransfer deltaX deltaY deltaZ deltaMode targetTouches char charCode key keyCode passive'.split(' ')\n\t\t\t\t},\n\t\t\t\trelatedTarget: {\n\t\t\t\t\tmatch:      /^(?:blur|focus|focusin|focusout|mouseenter|mouseleave|mouseout|mouseover|dragenter|dragexit)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tobjectDefineProperty(event, 'relatedTarget', { value: (function() {\n\t\t\t\t\t\t\t\treturn originalEvent.relatedTarget || (originalEvent.fromElement === event.target) ? originalEvent.toElement : originalEvent.fromElement;\n\t\t\t\t\t\t\t}()), enumerable: true });\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmetaKey: {\n\t\t\t\t\tmatch:      /^(?:key|mousedown|mouseup|click|dblclick)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tobjectDefineProperty(event, 'metaKey', {\n\t\t\t\t\t\t\tvalue:      originalEvent.metaKey && originalEvent.metaKey !== false,\n\t\t\t\t\t\t\tenumerable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\twhichKeyboard: {\n\t\t\t\t\tmatch:      /^(?:key)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tobjectDefineProperty(event, 'which', {\n\t\t\t\t\t\t\tvalue:      ((originalEvent.which || originalEvent.which !== 0) && originalEvent.which) || ((originalEvent.charCode !== null) ? originalEvent.charCode : originalEvent.keyCode),\n\t\t\t\t\t\t\tenumerable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\twhichMouse: {\n\t\t\t\t\tmatch:      /^(?:mousedown|mouseup|click|dblclick)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tobjectDefineProperty(event, 'which', {\n\t\t\t\t\t\t\tvalue:      ((originalEvent.which || originalEvent.which !== 0) && originalEvent.which) || (originalEvent.which & 1 ? 1 : (originalEvent.which & 2 ? 3 : (originalEvent.which & 4 ? 2 : 0))),\n\t\t\t\t\t\t\tenumerable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpageX: {\n\t\t\t\t\tmatch:      /^(?:mouse|pointer|contextmenu|click|dblclick|drag|drop|wheel)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tobjectDefineProperty(event, 'pageX', {\n\t\t\t\t\t\t\tvalue:      (function() {\n\t\t\t\t\t\t\t\tvar documentElement;\n\n\t\t\t\t\t\t\t\tif(typeof originalEvent.pageX !== 'undefined') {\n\t\t\t\t\t\t\t\t\treturn originalEvent.pageX;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tdocumentElement = (event.target.ownerDocument || document).documentElement;\n\n\t\t\t\t\t\t\t\treturn originalEvent.clientX + (documentElement.scrollLeft || 0) - (documentElement.clientLeft || 0);\n\t\t\t\t\t\t\t}()),\n\t\t\t\t\t\t\tenumerable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpageY: {\n\t\t\t\t\tmatch:      /^(?:mouse|pointer|contextmenu|touch|click|dblclick|drag|drop|wheel)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tobjectDefineProperty(event, 'pageY', {\n\t\t\t\t\t\t\tvalue: (function() {\n\t\t\t\t\t\t\t\tvar documentElement;\n\n\t\t\t\t\t\t\t\tif(typeof originalEvent.pageY !== 'undefined') {\n\t\t\t\t\t\t\t\t\treturn originalEvent.pageY;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tdocumentElement = (event.target.ownerDocument || document).documentElement;\n\n\t\t\t\t\t\t\t\treturn originalEvent.clientY + (documentElement.scrollTop  || 0) - (documentElement.clientTop  || 0);\n\t\t\t\t\t\t\t}()),\n\t\t\t\t\t\t\tenumerable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\tfunction transferProperties(event, originalEvent, properties) {\n\t\t\tvar definitions = {}, i = 0, property;\n\n\t\t\tfor(; (property = properties[i]); i++) {\n\t\t\t\tif(typeof originalEvent[property] !== 'undefined') {\n\t\t\t\t\tdefinitions[property] = {\n\t\t\t\t\t\tvalue:      originalEvent[property],\n\t\t\t\t\t\tenumerable: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tobjectDefineProperties(event, definitions);\n\t\t}\n\n\t\tfunction add(property, aHook) {\n\t\t\tif(property && aHook && storage[property]) {\n\t\t\t\tstorage[property] = aHook;\n\t\t\t}\n\t\t}\n\n\t\tfunction get(property) {\n\t\t\tif(property && storage[property]) {\n\t\t\t\treturn storage[property];\n\t\t\t}\n\t\t}\n\n\t\tfunction process(event, originalEvent) {\n\t\t\tvar isMatch;\n\n\t\t\titerate(storage, function(id, hook) {\n\t\t\t\tisMatch = !hook.match || hook.match.test(originalEvent.type);\n\n\t\t\t\tif(isMatch) {\n\t\t\t\t\tif(hook.properties) {\n\t\t\t\t\t\ttransferProperties(event, originalEvent, hook.properties);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(hook.process) {\n\t\t\t\t\t\thook.process(event, originalEvent);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn event;\n\t\t}\n\n\t\treturn { add: add, get: get, process: process };\n\t}\n\n\tprovide([ '/demand/function/iterate' ], definition);\n}(this, document));\n"]}