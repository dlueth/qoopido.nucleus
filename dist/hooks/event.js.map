{"version":3,"sources":["hooks/event.js"],"names":["global","document","undefined","provide","iterate","storage","general","properties","split","process","event","originalEvent","pointer","isDefaultPrevented","isPropagationStopped","metaKey","target","srcElement","nodeType","parentNode","path","push","mouse","match","fromElement","which","button","pageX","clientX","ownerDocument","documentElement","body","scrollLeft","clientLeft","pageY","clientY","scrollTop","clientTop","relatedTarget","toElement","touch","key","charCode","keyCode","add","property","aHook","get","id","hook","test","type","i","transferProperties","delegate","this"],"mappings":"CAIC,SAASA,EAAQC,EAAUC,GAC3B,aA0HAC,SAAU,4BAxHV,SAAoBC,GACnB,IACCC,GACCC,SACCC,WAAY,kIAAkIC,MAAM,KACpJC,QAAY,SAASC,EAAOC,GAC3B,IAAIC,EAeJ,GAbAF,EAAMC,cAAuBA,EAC7BD,EAAMG,qBAA0BF,EAA8B,iBAC9DD,EAAMI,uBAA0BH,EAA0B,aAC1DD,EAAMK,WAAwBJ,EAAcI,UAAqC,IAA1BJ,EAAcI,SAEjEL,EAAMM,SACTN,EAAMM,OAASL,EAAcM,YAAchB,GAGf,IAA1BS,EAAMM,OAAOE,WACfR,EAAMM,OAASN,EAAMM,OAAOG,aAGzBT,EAAMU,KAAM,CACfV,EAAMU,QACNR,EAAaF,EAAMM,OAEnB,GACCN,EAAMU,KAAKC,KAAKT,SACTA,EAAUA,EAAQO,YAE1BT,EAAMU,KAAKC,KAAKrB,MAInBsB,OACCC,MAAY,sEACZhB,WAAY,6JAA6JC,MAAM,KAC/KC,QAAY,SAASC,EAAOC,GAC3B,IAAIC,EAASY,EAAaC,EAE1BD,EAAcb,EAAca,YAC5BC,EAAcd,EAAce,OAvClB,OAyCPhB,EAAMiB,OAzCC,OAyCiBhB,EAAciB,UAExChB,GADAA,EAAUF,EAAMM,OAAOa,eAAiB5B,GACtB6B,iBAAmBlB,EAAQmB,KAE7CrB,EAAMiB,MAAQhB,EAAciB,SAAWhB,EAAQoB,YAAc,IAAMpB,EAAQqB,YAAc,GACzFvB,EAAMwB,MAAQvB,EAAcwB,SAAWvB,EAAQwB,WAAc,IAAMxB,EAAQyB,WAAc,KAGtF3B,EAAM4B,eAAiBd,IAC1Bd,EAAM4B,cAAiBd,IAAgBd,EAAMM,OAAUL,EAAc4B,UAAYf,GAG9Ed,EAAMe,OAASA,IAAUvB,IAC5BQ,EAAMe,MAAiB,EAARA,EAAY,EAAa,EAARA,EAAY,EAAa,EAARA,EAAY,EAAI,KAIpEe,OACCjB,MAAY,aACZhB,WAAY,UAAUC,MAAM,MAE7BiC,KACClB,MAAY,WACZhB,WAAY,4BAA4BC,MAAM,KAC9CC,QAAY,SAASC,EAAOC,GAjEjB,OAkEPD,EAAMe,QACRf,EAAMe,MAnEG,OAmEMd,EAAc+B,SAAqB/B,EAAc+B,SAAW/B,EAAcgC,YAiD9F,OAASC,IAlCT,SAAaC,EAAUC,GACnBD,GAAYC,GAASzC,EAAQwC,KAC/BxC,EAAQwC,GAAYC,IAgCHC,IA5BnB,SAAaF,GACZ,GAAGA,GAAYxC,EAAQwC,GACtB,OAAOxC,EAAQwC,IA0BYpC,QAtB7B,SAAiBC,EAAOC,GAGvBP,EAAQC,EAAS,SAAS2C,EAAIC,KAClBA,EAAK1B,OAAS0B,EAAK1B,MAAM2B,KAAKvC,EAAcwC,SAGnDF,EAAK1C,YA5BX,SAA4BG,EAAOC,EAAeJ,GAIjD,IAHA,IACCsC,EADGO,EAAI,EAGFP,EAAWtC,EAAW6C,GAAIA,IAC/B1C,EAAMmC,GAAYlC,EAAckC,GAwB9BQ,CAAmB3C,EAAOC,EAAesC,EAAK1C,YAG5C0C,EAAKxC,SACPwC,EAAKxC,QAAQC,EAAOC,GAGlBsC,EAAKK,WACP5C,EAAM4C,SAAWL,EAAKK,iBAlH5B,CA4HEC,KAAMtD","file":"event.js","sourcesContent":["/**\n * @use /demand/function/iterate\n */\n\n(function(global, document, undefined) {\n\t'use strict';\n\n\tfunction definition(iterate) {\n\t\tvar NULL    = null,\n\t\t\tstorage = {\n\t\t\t\tgeneral: {\n\t\t\t\t\tproperties: 'type altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which path'.split(' '),\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tvar pointer;\n\n\t\t\t\t\t\tevent.originalEvent        = originalEvent;\n\t\t\t\t\t\tevent.isDefaultPrevented   = !!(originalEvent.defaultPrevented);\n\t\t\t\t\t\tevent.isPropagationStopped = !!(originalEvent.cancelBubble);\n\t\t\t\t\t\tevent.metaKey              = (originalEvent.metaKey && originalEvent.metaKey !== false) ? true : false;\n\n\t\t\t\t\t\tif(!event.target) {\n\t\t\t\t\t\t\tevent.target = originalEvent.srcElement || document;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(event.target.nodeType === 3) {\n\t\t\t\t\t\t\tevent.target = event.target.parentNode;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(!event.path) {\n\t\t\t\t\t\t\tevent.path = [];\n\t\t\t\t\t\t\tpointer    = event.target;\n\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\tevent.path.push(pointer);\n\t\t\t\t\t\t\t} while(pointer = pointer.parentNode);\n\n\t\t\t\t\t\t\tevent.path.push(global);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmouse: {\n\t\t\t\t\tmatch:      /^(?:mouse|pointer|contextmenu|touch|click|dblclick|drag|drop|wheel)/,\n\t\t\t\t\tproperties: 'button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement dataTransfer deltaX deltaY deltaZ deltaMode targetTouches'.split(' '),\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tvar pointer, fromElement, which;\n\n\t\t\t\t\t\tfromElement = originalEvent.fromElement;\n\t\t\t\t\t\twhich       = originalEvent.button;\n\n\t\t\t\t\t\tif(event.pageX === NULL && originalEvent.clientX !== NULL) {\n\t\t\t\t\t\t\tpointer = event.target.ownerDocument || document;\n\t\t\t\t\t\t\tpointer = pointer.documentElement || pointer.body;\n\n\t\t\t\t\t\t\tevent.pageX = originalEvent.clientX + (pointer.scrollLeft || 0) - (pointer.clientLeft || 0);\n\t\t\t\t\t\t\tevent.pageY = originalEvent.clientY + (pointer.scrollTop  || 0) - (pointer.clientTop  || 0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(!event.relatedTarget && fromElement) {\n\t\t\t\t\t\t\tevent.relatedTarget = (fromElement === event.target) ? originalEvent.toElement : fromElement;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(!event.which && which !== undefined) {\n\t\t\t\t\t\t\tevent.which = (which & 1 ? 1 : (which & 2 ? 3 : (which & 4 ? 2 : 0)));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttouch: {\n\t\t\t\t\tmatch:      /^(?:touch)/,\n\t\t\t\t\tproperties: 'passive'.split(' ')\n\t\t\t\t},\n\t\t\t\tkey: {\n\t\t\t\t\tmatch:      /^(?:key)/,\n\t\t\t\t\tproperties: 'char charCode key keyCode'.split(' '),\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tif(event.which === NULL) {\n\t\t\t\t\t\t\tevent.which = (originalEvent.charCode !== NULL) ? originalEvent.charCode : originalEvent.keyCode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\tfunction transferProperties(event, originalEvent, properties) {\n\t\t\tvar i = 0,\n\t\t\t\tproperty;\n\n\t\t\tfor(; property = properties[i]; i++) {\n\t\t\t\tevent[property] = originalEvent[property];\n\t\t\t}\n\t\t}\n\n\t\tfunction add(property, aHook) {\n\t\t\tif(property && aHook && storage[property]) {\n\t\t\t\tstorage[property] = aHook;\n\t\t\t}\n\t\t}\n\n\t\tfunction get(property) {\n\t\t\tif(property && storage[property]) {\n\t\t\t\treturn storage[property];\n\t\t\t}\n\t\t}\n\n\t\tfunction process(event, originalEvent) {\n\t\t\tvar isMatch;\n\n\t\t\titerate(storage, function(id, hook) {\n\t\t\t\tisMatch = !hook.match || hook.match.test(originalEvent.type);\n\n\t\t\t\tif(isMatch) {\n\t\t\t\t\tif(hook.properties) {\n\t\t\t\t\t\ttransferProperties(event, originalEvent, hook.properties);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(hook.process) {\n\t\t\t\t\t\thook.process(event, originalEvent);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(hook.delegate) {\n\t\t\t\t\t\tevent.delegate = hook.delegate;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn { add: add, get: get, process: process };\n\t}\n\n\tprovide([ '/demand/function/iterate' ], definition);\n}(this, document));\n"]}