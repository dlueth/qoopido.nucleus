{"version":3,"sources":["hooks/event.js"],"names":["global","document","provide","iterate","storage","general","properties","split","relatedTarget","match","process","event","originalEvent","Object","defineProperty","value","fromElement","target","toElement","enumerable","metaKey","whichKeyboard","which","charCode","keyCode","whichMouse","pageX","pointer","ownerDocument","documentElement","body","clientX","scrollLeft","clientLeft","pageY","clientY","scrollTop","clientTop","add","property","aHook","get","id","hook","test","type","definitions","i","defineProperties","transferProperties","this"],"mappings":";CAIC,SAASA,EAAQC,GACjB,aAsIAC,QAAQ,CAAE,6BApIV,SAAoBC,GACnB,IAAIC,EAAU,CACZC,QAAS,CACRC,WAAY,4PAA4PC,MAAM,MAE/QC,cAAe,CACdC,MAAY,+FACZC,QAAY,SAASC,EAAOC,GAC3BC,OAAOC,eAAeH,EAAO,gBAAiB,CAAEI,MACvCH,EAAcJ,eAAkBI,EAAcI,cAAgBL,EAAMM,OAAUL,EAAcM,UAAYN,EAAcI,YACxHG,YAAY,MAGrBC,QAAS,CACRX,MAAY,4CACZC,QAAY,SAASC,EAAOC,GAC3BC,OAAOC,eAAeH,EAAO,UAAW,CACvCI,MAAYH,EAAcQ,UAAqC,IAA1BR,EAAcQ,QACnDD,YAAY,MAIfE,cAAe,CACdZ,MAAY,WACZC,QAAY,SAASC,EAAOC,GAC3BC,OAAOC,eAAeH,EAAO,QAAS,CACrCI,OAAcH,EAAcU,OAAiC,IAAxBV,EAAcU,QAAgBV,EAAcU,QAAuC,OAA3BV,EAAcW,SAAqBX,EAAcW,SAAWX,EAAcY,SACvKL,YAAY,MAIfM,WAAY,CACXhB,MAAY,wCACZC,QAAY,SAASC,EAAOC,GAC3BC,OAAOC,eAAeH,EAAO,QAAS,CACrCI,OAAcH,EAAcU,OAAiC,IAAxBV,EAAcU,QAAgBV,EAAcU,QAAiC,EAAtBV,EAAcU,MAAY,EAA2B,EAAtBV,EAAcU,MAAY,EAA2B,EAAtBV,EAAcU,MAAY,EAAI,GACxLH,YAAY,MAIfO,MAAO,CACNjB,MAAY,sEACZC,QAAY,SAASC,EAAOC,GAEb,IAMPe,EAPPd,OAAOC,eAAeH,EAAO,QAAS,CACrCI,MACmC,oBAAxBH,EAAcc,MAChBd,EAAcc,OAMrBC,GAFIA,EAAUhB,EAAMM,OAAOW,eAAiB3B,GAE1B4B,iBAAmBF,EAAQG,KAEtClB,EAAcmB,SAAWJ,EAAQK,YAAc,IAAML,EAAQM,YAAc,IAGpFd,YAAY,MAIfe,MAAO,CACNzB,MAAY,sEACZC,QAAY,SAASC,EAAOC,GAElB,IAMFe,EAPPd,OAAOC,eAAeH,EAAO,QAAS,CACrCI,MACmC,oBAAxBH,EAAcsB,MAChBtB,EAAcsB,OAMrBP,GAFIA,EAAUhB,EAAMM,OAAOW,eAAiB3B,GAE1B4B,iBAAmBF,EAAQG,KAEtClB,EAAcuB,SAAWR,EAAQS,WAAc,IAAMT,EAAQU,WAAc,IAGpFlB,YAAY,OAmDjB,MAAO,CAAEmB,IAhCT,SAAaC,EAAUC,GACnBD,GAAYC,GAASpC,EAAQmC,KAC/BnC,EAAQmC,GAAYC,IA8BHC,IA1BnB,SAAaF,GACZ,GAAGA,GAAYnC,EAAQmC,GACtB,OAAOnC,EAAQmC,IAwBY7B,QApB7B,SAAiBC,EAAOC,GAiBvB,OAdAT,EAAQC,GAAS,SAASsC,EAAIC,KAClBA,EAAKlC,OAASkC,EAAKlC,MAAMmC,KAAKhC,EAAciC,SAGnDF,EAAKrC,YAhCX,SAA4BK,EAAOC,EAAeN,GAGjD,IAFA,IAA6BiC,EAAzBO,EAAc,GAAIC,EAAI,GAEnBR,EAAWjC,EAAWyC,KAA0C,oBAA5BnC,EAAc2B,GAA2BQ,IACnFD,EAAYP,GAAY,CACvBxB,MAAYH,EAAc2B,GAC1BpB,YAAY,GAIdN,OAAOmC,iBAAiBrC,EAAOmC,GAuB5BG,CAAmBtC,EAAOC,EAAe+B,EAAKrC,YAG5CqC,EAAKjC,SACPiC,EAAKjC,QAAQC,EAAOC,OAKhBD,OAjIV,CAwIEuC,EAAMjD","file":"event.js","sourcesContent":["/**\n * @use /demand/function/iterate\n */\n\n(function(global, document) {\n\t'use strict';\n\n\tfunction definition(iterate) {\n\t\tvar storage = {\n\t\t\t\tgeneral: {\n\t\t\t\t\tproperties: 'bubbles cancelable isTrusted timeStamp type view altKey ctrlKey shiftKey button buttons clientX clientY fromElement offsetX offsetY screenX screenY toElement dataTransfer deltaX deltaY deltaZ deltaMode targetTouches char charCode key keyCode passive'.split(' ')\n\t\t\t\t},\n\t\t\t\trelatedTarget: {\n\t\t\t\t\tmatch:      /^(?:blur|focus|focusin|focusout|mouseenter|mouseleave|mouseout|mouseover|dragenter|dragexit)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tObject.defineProperty(event, 'relatedTarget', { value: (function() {\n\t\t\t\t\t\t\t\treturn originalEvent.relatedTarget || (originalEvent.fromElement === event.target) ? originalEvent.toElement : originalEvent.fromElement;\n\t\t\t\t\t\t\t}()), enumerable: true });\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmetaKey: {\n\t\t\t\t\tmatch:      /^(?:key|mousedown|mouseup|click|dblclick)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tObject.defineProperty(event, 'metaKey', {\n\t\t\t\t\t\t\tvalue:      originalEvent.metaKey && originalEvent.metaKey !== false,\n\t\t\t\t\t\t\tenumerable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\twhichKeyboard: {\n\t\t\t\t\tmatch:      /^(?:key)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tObject.defineProperty(event, 'which', {\n\t\t\t\t\t\t\tvalue:      ((originalEvent.which || originalEvent.which !== 0) && originalEvent.which) || ((originalEvent.charCode !== null) ? originalEvent.charCode : originalEvent.keyCode),\n\t\t\t\t\t\t\tenumerable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\twhichMouse: {\n\t\t\t\t\tmatch:      /^(?:mousedown|mouseup|click|dblclick)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tObject.defineProperty(event, 'which', {\n\t\t\t\t\t\t\tvalue:      ((originalEvent.which || originalEvent.which !== 0) && originalEvent.which) || (originalEvent.which & 1 ? 1 : (originalEvent.which & 2 ? 3 : (originalEvent.which & 4 ? 2 : 0))),\n\t\t\t\t\t\t\tenumerable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpageX: {\n\t\t\t\t\tmatch:      /^(?:mouse|pointer|contextmenu|touch|click|dblclick|drag|drop|wheel)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tObject.defineProperty(event, 'pageX', {\n\t\t\t\t\t\t\tvalue:      (function() {\n\t\t\t\t\t\t\t\tif(typeof originalEvent.pageX !== 'undefined') {\n\t\t\t\t\t\t\t\t\treturn originalEvent.pageX;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn (function() {\n\t\t\t\t\t\t\t\t\tvar pointer = event.target.ownerDocument || document;\n\n\t\t\t\t\t\t\t\t\tpointer = pointer.documentElement || pointer.body;\n\n\t\t\t\t\t\t\t\t\treturn originalEvent.clientX + (pointer.scrollLeft || 0) - (pointer.clientLeft || 0);\n\t\t\t\t\t\t\t\t}());\n\t\t\t\t\t\t\t}()),\n\t\t\t\t\t\t\tenumerable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpageY: {\n\t\t\t\t\tmatch:      /^(?:mouse|pointer|contextmenu|touch|click|dblclick|drag|drop|wheel)/,\n\t\t\t\t\tprocess:    function(event, originalEvent) {\n\t\t\t\t\t\tObject.defineProperty(event, 'pageY', {\n\t\t\t\t\t\t\tvalue: (function() {\n\t\t\t\t\t\t\t\tif(typeof originalEvent.pageY !== 'undefined') {\n\t\t\t\t\t\t\t\t\treturn originalEvent.pageY;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn (function() {\n\t\t\t\t\t\t\t\t\tvar pointer = event.target.ownerDocument || document;\n\n\t\t\t\t\t\t\t\t\tpointer = pointer.documentElement || pointer.body;\n\n\t\t\t\t\t\t\t\t\treturn originalEvent.clientY + (pointer.scrollTop  || 0) - (pointer.clientTop  || 0);\n\t\t\t\t\t\t\t\t}());\n\t\t\t\t\t\t\t}()),\n\t\t\t\t\t\t\tenumerable: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\tfunction transferProperties(event, originalEvent, properties) {\n\t\t\tvar definitions = {}, i = 0, property;\n\n\t\t\tfor(; (property = properties[i]) && typeof originalEvent[property] !== 'undefined'; i++) {\n\t\t\t\tdefinitions[property] = {\n\t\t\t\t\tvalue:      originalEvent[property],\n\t\t\t\t\tenumerable: true\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tObject.defineProperties(event, definitions);\n\t\t}\n\n\t\tfunction add(property, aHook) {\n\t\t\tif(property && aHook && storage[property]) {\n\t\t\t\tstorage[property] = aHook;\n\t\t\t}\n\t\t}\n\n\t\tfunction get(property) {\n\t\t\tif(property && storage[property]) {\n\t\t\t\treturn storage[property];\n\t\t\t}\n\t\t}\n\n\t\tfunction process(event, originalEvent) {\n\t\t\tvar isMatch;\n\n\t\t\titerate(storage, function(id, hook) {\n\t\t\t\tisMatch = !hook.match || hook.match.test(originalEvent.type);\n\n\t\t\t\tif(isMatch) {\n\t\t\t\t\tif(hook.properties) {\n\t\t\t\t\t\ttransferProperties(event, originalEvent, hook.properties);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(hook.process) {\n\t\t\t\t\t\thook.process(event, originalEvent);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn event;\n\t\t}\n\n\t\treturn { add: add, get: get, process: process };\n\t}\n\n\tprovide([ '/demand/function/iterate' ], definition);\n}(this, document));\n"]}